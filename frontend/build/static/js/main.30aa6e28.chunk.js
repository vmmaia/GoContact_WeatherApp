(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{20:function(e,t,r){},32:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},65:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(15),c=r.n(n),s=r(8),i=Object(s.a)(),o=r(74),u=r(4),l=r(14),d=r(33),j=r(12),h=r(3),b="SEARCH",p="SEARCH_SET_QUERY",O="SEARCH_RESET",f="RETRIEVE_CITY",x="UPDATE_TIME",m="TABLE_SORT_BY",y={isSearching:!1,showResults:!1,results:[],query:"",error:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(h.a)(Object(h.a)({},e),{},{isSearching:t.payload.isSearching,showResults:""!==e.query&&t.payload.showResults,error:t.payload.error,results:Object(j.a)(t.payload.results)});case p:return Object(h.a)(Object(h.a)({},e),{},{query:t.payload.query});case O:return Object(h.a)({},y);default:return Object(h.a)({},e)}},w={cities:[],table:{sortBy:"name",order:"asc",entries:[]}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return e.cities.find((function(e){return e.name===t.payload.city.name}))?Object(h.a)({},e):Object(h.a)(Object(h.a)({},e),{},{cities:[].concat(Object(j.a)(e.cities),[t.payload.city]),table:Object(h.a)(Object(h.a)({},e.table),{},{entries:[].concat(Object(j.a)(e.table.entries),[t.payload.city])})});case x:var r=e.cities.map((function(e){return e.name===t.payload.name?Object(h.a)(Object(h.a)({},e),{},{time:e.time+6e4}):e}));return Object(h.a)(Object(h.a)({},e),{},{cities:r});case m:var a=t.payload.column||e.table.sortBy,n=t.payload.column?"asc"===e.table.order?"desc":"asc":e.table.order;"sunset"!==a&&"sunrise"!==a||(a+="_epoch");var c=Object(j.a)(e.table.entries).sort((function(e,t){var r=typeof e[a];if("asc"===n){if("string"===r)return e[a].localeCompare(t[a]);if("number"===r)return e[a]-t[a]}else{if("string"===r)return t[a].localeCompare(e[a]);if("number"===r)return t[a]-e[a]}return 0}));return Object(h.a)(Object(h.a)({},e),{},{table:{sortBy:a,order:n,entries:c}});default:return Object(h.a)({},e)}},g=Object(l.b)({search:v,weather:S}),N=[d.a],C=Object(l.c)(g,{},l.a.apply(void 0,N)),E=(r(43),r(44),r(0)),T=function(e){return Object(E.jsx)("div",{className:"page-footer",children:Object(E.jsx)("div",{children:"Vasco Maia"})})},R=r(11),_=r.n(R),k=r(17),B=r(18),F=r.n(B),q=function(e){var t=void 0;e.response&&e.response.data&&e.response.data.errors?t=e.response.data.errors.reduce((function(e,t){return e+", ".concat(t.message)}),"").substring(2):t="Something went wrong";return t},A=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).BACKEND_URL||"http://127.0.0.1:5000",D=(r(20),Object(u.b)(null,{retrieveCity:function(e){return function(){var t=Object(k.a)(_.a.mark((function t(r){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.post("".concat(A,"/current"),{query:e});case 3:a=t.sent,r({type:f,payload:{city:Object(h.a)({},a.data)}}),r({type:m,payload:{}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(q(t.t0));case 11:return t.prev=11,r({type:O,payload:{}}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(E.jsxs)("div",{"data-testid":"search-result-item",className:"search-result-item",onClick:function(){return e.retrieveCity("".concat(e.result.name,", ").concat(e.result.details))},children:[Object(E.jsx)("i",{className:"fa fa-map-marker","aria-hidden":"true"}),Object(E.jsxs)("div",{className:"search-results-details-wrapper",children:[Object(E.jsx)("div",{className:"search-result-name",children:e.result.name}),Object(E.jsx)("div",{className:"search-result-details",children:e.result.details})]})]})}))),H=(r(65),function(e){return Object(E.jsxs)("div",{className:"spinner-wrapper","data-testid":"spinner-wrapper",children:[Object(E.jsx)("i",{className:"fa fa-spinner","aria-hidden":"true"}),Object(E.jsx)("span",{children:"Searching"})]})}),I=Object(u.b)((function(e){return{searchState:e.search}}),null)((function(e){return Object(E.jsx)("div",{"data-testid":"search-result-list",className:"search-result-list",children:e.searchState.isSearching?Object(E.jsx)(H,{}):""!==e.searchState.error?Object(E.jsx)("span",{children:e.searchState.error}):0===e.searchState.results.length?Object(E.jsx)("span",{children:"No results found"}):Object(E.jsx)(E.Fragment,{children:e.searchState.results.map((function(e,t){return Object(E.jsx)(D,{result:e},t)}))})})})),L=0,U=Object(u.b)((function(e){return{searchState:e.search}}),{search:function(e){return function(){var t=Object(k.a)(_.a.mark((function t(r){var a,n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:b,payload:{isSearching:!0,showResults:!0,error:"",results:[]}}),t.prev=1,t.next=4,F.a.post("".concat(A,"/search"),{query:e});case 4:a=t.sent,r({type:b,payload:{isSearching:!1,showResults:!0,error:"",results:a.data.results}}),t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(1),!(n=q(t.t0))){t.next=14;break}return r({type:b,payload:{isSearching:!1,showResults:!0,error:n,results:[]}}),t.abrupt("return");case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},resetSearch:function(){return function(e){e({type:O,payload:{}})}},setQuery:function(e){return function(t){t({type:p,payload:{query:e}})}}})((function(e){var t=function(t,r){t===L&&e.search(r)};return Object(E.jsxs)("div",{"data-testid":"search-wrapper",className:"search-wrapper ".concat(e.searchState.showResults?"search-wrapper-with-results":""),children:[Object(E.jsx)("input",{"data-testid":"search-input",className:"search-input",type:"text",placeholder:"Find the weather in your city",onChange:function(r){var a=r.target.value;if(e.setQuery(a),!(a.length<=3))if(0!==a.length&&""!==a){var n=++L;setTimeout((function(){t(n,a)}),750)}else e.resetSearch()},value:e.searchState.query}),Object(E.jsx)("i",{className:"fa fa-search search-icon","aria-hidden":"true"}),e.searchState.showResults?Object(E.jsx)(I,{}):Object(E.jsx)(E.Fragment,{})]})})),K=(r(32),Object(u.b)(null,{updateTime:function(e){return function(t){t({type:x,payload:{name:e}})}}})((function(e){Object(a.useEffect)((function(){var t=setInterval((function(){e.updateTime(e.city.name)}),6e4);return function(){clearInterval(t)}}),[]);return Object(E.jsxs)("div",{"data-testid":"weather-card-wrapper",className:"weather-card ".concat(1===e.city.is_day?"weather-card-day":"weather-card-night"),children:[Object(E.jsxs)("div",{className:"weather-card-top-section",children:[Object(E.jsx)("img",{alt:"weather icon",src:"/assets/weather-icons/".concat(1===e.city.is_day?"day":"night","/").concat(e.city.weather_icon)}),Object(E.jsx)("span",{children:"".concat(e.city.temperature,"\xbaC")})]}),Object(E.jsx)("div",{className:"weather-card-condition",children:Object(E.jsx)("span",{children:e.city.weather})}),Object(E.jsx)("hr",{}),Object(E.jsxs)("div",{className:"weather-card-location-section",children:[Object(E.jsx)("div",{children:e.city.name}),Object(E.jsx)("div",{children:e.city.details})]}),Object(E.jsx)("hr",{}),Object(E.jsxs)("div",{className:"weather-card-details-section",children:[Object(E.jsxs)("div",{children:[Object(E.jsx)("span",{children:"Sunrise"}),Object(E.jsx)("br",{}),Object(E.jsx)("span",{children:e.city.sunrise})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("span",{children:"Sunset"}),Object(E.jsx)("br",{}),Object(E.jsx)("span",{children:e.city.sunset})]})]}),Object(E.jsx)("div",{className:"weather-card-time-section",children:"Current time: ".concat(function(e){var t=new Date(e);return"".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))}(e.city.time))})]})}))),P=Object(u.b)((function(e){return{weatherState:e.weather}}),null)((function(e){return e.weatherState.cities.map((function(e,t){return Object(E.jsx)(K,{city:e},t)}))})),M=r(34),Q=r.n(M),V=(r(67),Object(u.b)((function(e){return{weatherState:e.weather}}),null)((function(e){var t=[{name:"Temperature",data:e.weatherState.cities.map((function(e){return e.temperature}))}],r={chart:{id:"barchart"},xaxis:{categories:e.weatherState.cities.map((function(e){return e.name}))}};return Object(E.jsx)("div",{"data-testid":"graph-wrapper",className:"graph-wrapper",children:0!==e.weatherState.cities.length?Object(E.jsx)(Q.a,{series:t,options:r,type:"bar",height:"250px"}):Object(E.jsx)(E.Fragment,{})})}))),W=(r(68),Object(u.b)((function(e){return{weatherState:e.weather}}),{sortTable:function(e){return function(t){t({type:m,payload:{column:e}})}}})((function(e){var t=function(t){e.sortTable(t)},r=function(t){var r="asc",a="table-selected-icon-invisible";return e.weatherState.table.sortBy===t&&(r=e.weatherState.table.order,a="table-selected-icon-visible"),Object(E.jsx)("i",{className:"fa fa-sort-amount-".concat(r," ").concat(a),"aria-hidden":"true"})};return 0!==e.weatherState.table.entries.length?Object(E.jsx)("div",{"data-testid":"table-wrapper",className:"table-wrapper",children:Object(E.jsxs)("table",{"data-testid":"table",children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsxs)("th",{onClick:function(){return t("name")},children:["City",r("name")]}),Object(E.jsxs)("th",{onClick:function(){return t("details")},children:["Location",r("details")]}),Object(E.jsxs)("th",{onClick:function(){return t("temperature")},children:["Temperature (\xbaC)",r("temperature")]}),Object(E.jsxs)("th",{onClick:function(){return t("sunrise")},children:["Sunrise",r("sunrise")]}),Object(E.jsxs)("th",{onClick:function(){return t("sunset")},children:["Sunset",r("sunset")]})]})}),Object(E.jsx)("tbody",{children:e.weatherState.table.entries.map((function(e,t){return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:e.name}),Object(E.jsx)("td",{children:e.details}),Object(E.jsx)("td",{children:e.temperature}),Object(E.jsx)("td",{children:e.sunrise}),Object(E.jsx)("td",{children:e.sunset})]},t)}))})]})}):Object(E.jsx)(E.Fragment,{})}))),Y=(r(69),function(e){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(U,{}),Object(E.jsx)("div",{className:"landing-info-container",children:Object(E.jsx)(P,{})}),Object(E.jsxs)("div",{className:"landing-info-container",children:[Object(E.jsx)(W,{}),Object(E.jsx)(V,{})]})]})}),J=(r(70),function(e){return Object(E.jsxs)("div",{className:"error-page-container",children:[Object(E.jsx)("i",{className:"fa fa-exclamation-triangle","aria-hidden":"true"}),Object(E.jsx)("p",{children:"The page you are looking for does not exist"})]})}),z=function(e){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"page-wrapper",children:Object(E.jsxs)(o.d,{children:[Object(E.jsx)(o.b,{exact:!0,path:"/",component:Y}),Object(E.jsx)(o.b,{exact:!0,path:"/404",component:J}),Object(E.jsx)(o.a,{from:"*",to:"/404"})]})}),Object(E.jsx)(T,{})]})};c.a.render(Object(E.jsx)(u.a,{store:C,children:Object(E.jsx)(o.c,{history:i,children:Object(E.jsx)(o.b,{path:"/",component:z})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.30aa6e28.chunk.js.map